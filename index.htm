<!doctype html>

<head>
    <title>Decrypt Home Assistant backups</title>
    <script src="hadecrypt.js"></script>
    <style type="text/css">
        body {
            font-family: sans-serif;
        }
    </style>
</head>

<body>
    <h1 style="font-size:1em">Decrypt Home Assistant backups</h1>
    This uses WebCrypto to decrypt .tar.gz files from an encrypted Home Assistant backup. Runs completely in the
    browser; no data is uploaded.<br><br>
    <a href="https://github.com/JanM321/decrypt-ha-backup">Source code</a>
    <br><br>
    NOTE: Unfortunately the 'securetar' file format <a href="https://github.com/pvizeli/securetar/issues/19">has known issues</a> and the unencrypted files can't be read by some decompression programs.
    <hr>
    Select one or more .tar.gz files from a HA backup (untar first!), eg homeassistant.tar.gz:<br>
    <input type="file" id="filepicker" multiple>
    <br><br>
    Enter your encryption key: <input type="text" id="encryptionkey"><br>
    <button onclick="processFiles(filepicker.files, encryptionkey.value.trim())">Go!</button>
    <hr>
    <p id="status"></p>
</body>
